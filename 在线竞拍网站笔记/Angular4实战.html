<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600587 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="3417"/>

<div>
<span><div><img src="Angular4实战_files/Image.png" type="image/png" data-filename="Image.png"/></div><div><span style="font-size: 18.6667px;"><span style="font-size: 18.6667px; color: rgb(166, 0, 196); font-weight: bold;">AngularJS统称是Angular1.X的版本，而Angular则是Angular2以后的版本，项目使用的是Angular4</span></span></div><div><span style="font-size: 14pt;">-------------------------------项目知识点---------------------------------</span></div><div><span style="font-size: 14pt;">1.路由和导航——路由基本知识、在路由时传递参数、路由高级特性（重定向路由、辅助路由、路由守卫）</span></div><div><span style="font-size: 14pt;">2.依赖注入——Angular对依赖注入的实现方式、Angular的提供器和注入器</span></div><div><span style="font-size: 14pt;">3.数据绑定、响应式编程（异步请求）、管道（过滤数据）</span></div><div><span style="font-size: 14pt;">4.组件间通讯——输入输出属性、中间人模式、组件生命周期</span></div><div><span style="font-size: 14pt;">5.表单处理——模板式表单、响应式表单、表单校验</span></div><div><span style="font-size: 14pt;">6.与服务器通信——创建web服务器、使用Http协议与服务器通讯、使用WebSocket协议与服务器通讯</span></div><div><span style="font-size: 14pt;">7.构建和部署、多环境支撑</span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;">-------------------AngularJS简介----------------------------------</span></div><div><span style="font-size: 14pt;">1、AngularJS的优点</span></div><div><span style="font-size: 14pt;">    模板功能强大丰富</span></div><div><span style="font-size: 14pt;">    比较完善的前端MVC框架</span></div><div><span style="font-size: 14pt;">    引入了Java的一些概念</span></div><div><span style="font-size: 14pt;">2、AngularJS的问题</span></div><div><span style="font-size: 14pt;">    性能、路由、作用域、表单检验、JavaScript语言、学习成本高</span></div><div><span style="font-size: 14pt;">3、AngularJS架构</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [1].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">--------------------------------Angular简介--------------------------------------</span></div><div><span style="font-size: 14pt;">1、Angular新特性</span></div><div><span style="font-size: 14pt;">    全新的命令行工具AngularCLI、服务器端渲染、移动和桌面兼容</span></div><div><span style="font-size: 14pt;">2、Angular架构</span></div><div><span style="font-size: 14pt;">  </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [2].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 18.6667px;"><span style="font-size: 18.6667px; color: rgb(166, 0, 196); font-weight: bold;">组件</span>：是Angular应用的基本构建块，你可以把一个组件理解为一段带有业务逻辑和数据的HTML</span></div><div><span style="font-size: 18.6667px;"><span style="font-size: 18.6667px; color: rgb(166, 0, 196); font-weight: bold;">服务</span>：用来封装可重用的业务逻辑</span></div><div><span style="font-size: 18.6667px;"><span style="font-size: 18.6667px; color: rgb(166, 0, 196); font-weight: bold;">指令</span>：允许你向HTML元素添加自定义行为 </span></div><div><span style="font-size: 18.6667px;"><span style="font-size: 18.6667px; color: rgb(166, 0, 196); font-weight: bold;">模块</span>：用来将应用中不同的部分组织成一个Angular框架可以理解的单元</span></div><div><span style="font-size: 14pt;">3、与React对比</span></div><div><span style="font-size: 14pt;">    React优点：速度、FLUX架构、服务器渲染</span></div><div><span style="font-size: 14pt;">4、与Vue对比</span></div><div><span style="font-size: 14pt;">    Vue优点：简单、灵活、性能</span></div><div><span style="font-size: 14pt;">     </span></div><div><br/></div><div><span style="font-size: 14pt;">--------------------------AngularCLI命令行工具-----------------------------</span></div><div><span style="font-size: 18.6667px;">生成文件的用途</span></div><div><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [3].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">e2e：测试用途的文件夹</span></div><div><span style="font-size: 18.6667px;">src：源文件</span></div><div><span style="font-size: 14pt;">.editorconfig：webstorm的配置文件</span></div><div><span style="font-size: 14pt;">.gitignore：gitig的配置文件</span></div><div><span style="font-size: 18.6667px;">karma.conf.js：执行自动化测试的文件</span></div><div><span style="font-size: 18.6667px;">packjson：模块的依赖包</span></div><div><span style="font-size: 18.6667px;">tslint.json：这是tslint的配置文件</span></div><div><span style="font-size: 18.6667px;">angular.json：angular的配置文件</span></div><div><span style="font-size: 18.6667px;"><br/></span></div><div><span style="font-size: 18.6667px;">src目录下：</span></div><div><span style="font-size: 14pt;">app文件夹 —— 包括应用的组件和模块，所写的代码一般放在这里</span></div><div><span style="font-size: 18.6667px;">assets文件夹 —— 存放静态文件</span></div><div><span style="font-size: 18.6667px;">environment文件夹 —— 环境配置文件</span></div><div><span style="font-size: 18.6667px;">index.html——整个文件的根HTML</span></div><div><span style="font-size: 18.6667px;">main.ts—— 整个web应用的入口点</span></div><div><span style="font-size: 18.6667px;">polyfills.ts —— 导入一些必要的库</span></div><div><span style="font-size: 18.6667px;">style.css —— 全局的css</span></div><div><span style="font-size: 18.6667px;">test.ts —— 关于自动化测试的</span></div><div><span style="font-size: 18.6667px;">tsconfig.json —— TypeScript编译器的配置</span></div><div><span style="font-size: 18.6667px;"><br/></span></div><div><span style="font-size: 18.6667px;">app目录下：</span></div><div><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [4].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">app.component.css</span></div><div><span style="font-size: 14pt;">app.component.html</span></div><div><span style="font-size: 14pt;">app.component.ts —— 组件</span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 18.6667px;">app.component.</span></div><div><span style="font-size: 18.6667px;"><br/></span></div><div><span style="font-size: 18.6667px;">------------------------------------------------组件-------------------------------------------------</span></div><div><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [5].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 18.6667px;">---------输入属性（@Inputs）：是用来接受外部数据的</span></div><div><span style="font-size: 18.6667px;">---------提供器（providers）：是用来做依赖注入的</span></div><div><span style="font-size: 18.6667px;">---------生命周期钩子：从组件在初始化到销毁的过程中，可以调用的各种生命周期钩子</span></div><div><span style="font-size: 14pt;">---------输出属性（@Output）：定义一些外部组件可能会感兴趣的事件，可以输出给其他组件使用</span></div><div><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [6].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">@Component：装饰器，所有的组件都需要使用一个Component装饰器</span></span></div><div><span style="font-size: 18.6667px;"><span style="font-size: 18.6667px; font-weight: bold;">用@Component装饰器定义了一个组件以及组件的元数据</span></span></div><div><span style="font-size: 18.6667px;"><span style="font-size: 18.6667px; color: rgb(166, 0, 196); font-weight: bold;">selector：CSS选择器，表示这个组件可以通过app-root标签来调用</span></span></div><div><span style="font-size: 18.6667px;"><span style="font-size: 18.6667px; color: rgb(166, 0, 196); font-weight: bold;">templateUrl ：指定了一个组件的模板文件</span></span></div><div><span style="font-size: 18.6667px;"><span style="font-size: 18.6667px; color: rgb(166, 0, 196); font-weight: bold;">styleUrls：指定了一个组件的CSS样式表</span></span></div><div><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [7].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 18.6667px;">AppComponent就是TypeScript的一个类，<span style="font-size: 18.6667px; color: rgb(166, 0, 196); font-weight: bold;">定义了组件的控制器</span></span></div><div><span style="font-size: 18.6667px;"><br/></span></div><div><span style="font-size: 18.6667px;">--------------------------------模块------------------------------------------</span></div><div><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [8].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 18.6667px;">使用@NgModule声明了一个模块，用declarations声明了模块中有什么东西</span></div><div><span style="font-size: 18.6667px;">注意：在declarations中只能声明组件、指令和管道</span></div><div><span style="font-size: 18.6667px;"><br/></span></div><div><span style="font-size: 18.6667px;">其实imports还声明了如果要正常运行，还需要什么东西</span></div><div><span style="font-size: 18.6667px;">providers只能声明服务，默认是空的，定义了模块提供了什么服务</span></div><div><span style="font-size: 18.6667px;">bootstrap声明了模块的主组件</span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;">-----------------------------angular应用的启动----------------------------------</span></div><div><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [9].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 18.6667px;">在angular.json文件中，可以看出angular应用在启动的时候，页面渲染的是src目录下的index.html文件，运行的脚本是src目录下的main.ts文件</span></div><div><span style="font-size: 14pt;">main.ts文件：</span></div><div><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [10].png" type="image/png" data-filename="Image.png"/> </span></div><div><span style="font-size: 18.6667px;">导入platformBrowserDynamic，会告诉angular要使用哪个模块来启动整个应用</span></div><div><span style="font-size: 18.6667px;">导入enableProdMode，用来关闭angular的开发者模式</span></div><div><span style="font-size: 18.6667px;">导入environment，即是导入了环境配置</span></div><div><span style="font-size: 18.6667px;">导入AppModule，整个应用的主模块</span></div><div><span style="font-size: 18.6667px;">下面的if判断，则是表示如果当前的环境是生产环境，这是用enableProdModule来关闭angular的开发者模式</span></div><div><span style="font-size: 18.6667px;">最后则是是用</span><span style="font-size: 18.6667px;">platformBrowserDynamic的bootstrapModule的方法来传入AppModule作为启动模块来启动应用</span></div><div><span style="font-size: 18.6667px;"><br/></span></div><div><span style="font-size: 18.6667px;"><span style="font-size: 18.6667px; color: rgb(166, 0, 196); font-weight: bold;">angular应用启动，</span><span style="font-size: 18.6667px; font-weight: bold;">就是AppModule会去寻找主组件AppComponent，然后根据主组件</span></span><span style="font-size: 18.6667px;"><span style="font-size: 18.6667px; font-weight: bold;">AppComponent对应的CSS选择器app-root，然后在使用了app-root标签的地方，加载绑定模块文件app.component.html来替换app-root这个标签 </span></span></div><div><span style="font-size: 18.6667px;"><br/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;">--------------------------Angular引入第三方库--------------------------------------- </span></div><div><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [11].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;">-----------------------Angular项目声明数据--------------------------------------</span></div><div><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [12].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;">-------------------------------</span><span style="font-size: 14pt; color: rgb(166, 0, 196); font-weight: bold;">一</span><span style="font-size: 14pt; color: rgb(166, 0, 196); font-weight: bold;">、使用Angular Route导航</span><span style="font-size: 14pt;">---------------------------------------</span></div><div><span style="font-size: 14pt;">1、路由的基本知识</span></div><div><span style="font-size: 14pt;">    Angular使用的是</span><span style="font-size: 14pt; font-weight: bold;">单页面应用</span><span style="font-size: 14pt;">，就是页面渲染的一直都是index.html这个页面，路由的跳转，是URL的不同，不同的路由，渲染的页面依然还是index.html这个页面</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [13].png" type="image/png" data-filename="Image.png"/> </span></div><div><span style="font-size: 14pt;">(1).Router对象中有一组路由对象，每一个路由对象都是由path和component属性；</span></div><div><span style="font-size: 14pt;">    <span style="font-size: 14pt; color: rgb(166, 0, 196); font-weight: bold;">注意：path中不能用 “ / ”</span></span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [14].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">(2).router-outlet</span></div><div><span style="font-size: 14pt;">    在AppComponent会自动生成router-outlet，router-outlet这个插座的作用就是让在页面中显示想要显示的组件</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [15].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">(3)</span><span style="font-size: 14pt;">.router-link</span></div><div><span style="font-size: 14pt;">    在页面中声明导航路由的指令</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [16].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    router-link中的参数</span><span style="font-size: 14pt; font-weight: bold;">不是一个字符串，而是一个数组</span><span style="font-size: 14pt;">，这是为了在导航路由的时候可以传递一些参数</span></div><div><span style="font-size: 14pt;">(4)</span><span style="font-size: 14pt;">.Router</span></div><div><span style="font-size: 14pt;">    负责在运行时执行路由的对象，可以通过调用其navigate()和navigateByUrl()方法来导航到一个指定的路由</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [17].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    在HTML文件中绑定click事件，然后在对应的ts文件中定义事件</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [18].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    需要构造一个router，然后调用其navigate方法</span></div><div><span style="font-size: 14pt;">(5)</span><span style="font-size: 14pt;">.设置通配符路由</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [19].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    使用 ** 可以匹配任何字符，所以需要放在最后面，在输入不正确的路由导航时，显示Code404组件</span></div><div><span style="font-size: 14pt;">    &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;在路由时传递数据&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span></div><div><span style="font-size: 14pt;">    (1).在查询参数中传递数据</span></div><div><span style="font-size: 14pt;">        </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [20].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">        在路由时通过问号，后面在参数和参数的值，来传递参数，而要获取参数，可以使用 </span><span style="font-size: 14pt;">ActivatedRoute.queryParams[id]这种方式来获取传递参数的值</span></div><div><span style="font-size: 14pt;">        ---&gt;第一步：在路由导航中添加参数以及参数的实际数据，实际参数的值为设置为[</span><span style="font-size: 14pt;">queryParams]=&quot;{id:1}&quot;</span></div><div><span style="font-size: 14pt;">        </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [21].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">        ---&gt;第二步：在组件中，自定义一个参数poductId，用来存放传递参数的值，在构造函数中声明routeInfo为ActivatedRoute，这样就可以使用传递过来的参数了，使用this.routeInfo.snapshot.queryParams[&quot;id&quot;]来获取传递的，名为id的参数，并将值赋值给自定义的参数</span><span style="font-size: 14pt;">ProductId</span></div><div><span style="font-size: 14pt;">        </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [22].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">        ---&gt;第三步：页面获取参数，在页面在可以直接使用自定义的</span><span style="font-size: 14pt;">ProductId，如果传递成功的话，</span><span style="font-size: 14pt;">ProductId是有值的</span></div><div><span style="font-size: 14pt;">        </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [23].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">        </span></div><div><span style="font-size: 14pt;">    (2).在路由路径中传递数据</span></div><div><span style="font-size: 14pt;">        </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [24].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">        在路由定义路径是，定义需要携带的参数，并且在进行路由访问时，输入实际的参数值，而要获取参数，可以使用</span><span style="font-size: 14pt;">ActivatedRoute.queryParams[id]这种方式来获取传递参数的值</span></div><div><span style="font-size: 14pt;">        ---&gt;第一步：在配置路由的时候，定义要传递的参数</span></div><div><span style="font-size: 14pt;">        </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [25].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">        ---&gt;第二步：在执行routerLink指令的时候，传递参数的值，即id为1</span></div><div><span style="font-size: 14pt;">        </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [26].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">        ---&gt;第三步：在页面的ts文件中，</span><span style="font-size: 14pt;">自定义一个参数productId，用来存放传递参数的值，在构造函数中声明routeInfo为ActivatedRoute，这样就可以使用传递过来的参数了，使用this.routeInfo.snapshot.params[&quot;id&quot;]来获取传递的，名为id的参数，并将值赋值给自定义的参数</span><span style="font-size: 14pt;">ProductId</span></div><div><span style="font-size: 14pt;">        </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [27].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">        ---&gt;第四步：页面获取ProductId</span></div><div><span style="font-size: 14pt;">        </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [28].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;">    (3).在路由配置中传递数据</span></div><div><span style="font-size: 14pt;">        </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [29].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">        在路由配置中，定义路由的时候，在定义一个data属性，data里面放的是传递的参数，可以使用</span><span style="font-size: 14pt;">ActivatedRoute.data[0][isProd]这种方式来获取传递参数的值</span></div><div><span style="font-size: 14pt;">    </span></div><div><span style="font-size: 14pt;">    (4).参数快照和参数订阅</span></div><div><span style="font-size: 14pt;">        </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [30].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">        </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [31].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">        </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [32].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">        如果在点击了a链接是跳转到productId为1的页面，此时再点击button添加到productId为2的页面，其实页面都是同一个，只是路由的URL不同，一个是1，而另外一个是2，在两者切换的过程，页面的productId只会显示第一次初始化Product组件的第一个值，而不会显示2的值，（可以理解我ngOnInit方法只初始化组件一次）要如何解决这样的问题的方法就叫做参数订阅   </span></div><div><span style="font-size: 14pt;">        ---&gt;参数订阅</span></div><div><span style="font-size: 14pt;">        </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [33].png" type="image/png" data-filename="Image.png" width="783"/></span></div><div><span style="font-size: 14pt;">        如果本身路由切换参数需要互相切换的话，要使用参数订阅，否则可以使用参数快照的方式</span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;">2、重定向路由：在用户访问一个特定的地址时，将其重定向到另一个指定的地址</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [34].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [35].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    当页面路由时空字符时，重定向到home组件上。<span style="font-size: 14pt; font-weight: bold;">重定向路由需要一个pathMatch属性，来告诉路由器如何用URL去匹配路由的路径，否则路由器就会报错</span></span></div><div><br/></div><div><span style="font-size: 14pt;">3、子路由</span></div><div><span style="font-size: 14pt;">    ---&gt;第一步：在原先的路由定义中，加入children即可以定义子路由</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [36].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    ---&gt;第二步：在父路由上增加router-outlet和子路由对应的组件的routerLink指令</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [37].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    在app.component.html中有一个router-outlet，在product-component.html中也有router-outlet，两个形成父子router-outlet</span></div><div><span style="font-size: 14pt;">    而且所有的路由都是在app.routing.module.ts这个模板中声明的</span></div><div><br/></div><div><span style="font-size: 14pt;">4、辅助路由 </span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [38].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    ---&gt;第一步：在app.routing.module.ts中声明辅助路由</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [39].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    ---&gt;第二步：在主插座以外还要声明一个带有name属性的副插座，同时在routerLink指令中，定义outlets， outlets中的属性，primary是指定当现实辅助路由aux时除了现实辅助路由，还要重定向到哪里 </span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [40].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;">5、路由守卫（当用户满足某种条件时，才会被允许进入或者离开一个路由）：a.只有当用户已经登录并拥有某些权限时才能进入某些路由；b.一个由多个表单组件组成的向导，例如注册流程，用户只有在当前路由的组件中填写了满足要求的信息才可以导航到下一个路由；c.当用户未执行保存操作而试图离开当前导航时提醒用户</span></div><div><span style="font-size: 14pt;">    路由守卫（Angular提供的钩子）</span></div><div><span style="font-size: 14pt;">    a.CanActivate：处理导航到某路由的情况 （满足这个守卫的要求才可以导航到某个路由）</span></div><div><span style="font-size: 14pt;">    ---&gt;第一步：定义一个守卫，当满足条件时才给与跳转</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [41].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    ---&gt;第二步：在app.routing.module.ts中设置</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [42].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    b.CanDeactivate：处理从当前路由离开的情况</span><span style="font-size: 14pt;">（满足这个守卫的要求才可以从这个路由离开）</span></div><div><span style="font-size: 14pt;">    第一步：定义一个守卫，满足条件才给离开当前的路由</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [43].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;">---&gt;第二步：在app.routing.module.ts中设置</span></div><div><span style="font-size: 14pt;">    </span><img src="Angular4实战_files/Image [44].png" type="image/png" data-filename="Image.png"/></div><div><span style="font-size: 14pt;">    c.Resolve：在路由激活之前获取路由数据（在路由导航之前获取路由的数据，然后再渲染，而不是导航之后，在等待页面数据渲染，等待过程中数据绑定的值可能没反应过来，影响用户体验）</span></div><div><span style="font-size: 14pt;">    ---&gt;第一步：定义一个resolve的守卫</span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [45].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    ---&gt;第二步：在app-routing.module.ts中引入</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [46].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">        </span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [47].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    所有的组件都会封装在一个模块里，而Routes对象就是存在模块中，<span style="font-size: 14pt; font-weight: bold;">Routes对象有两个属性，一个是path，是组件的URL属性，一个是Component，指定了要显示的组件</span></span></div><div><span style="font-size: 14pt;">    a.首先页面在展示时，会展示AppComponent的模板，而如果需要在输入地址为 /user的时候在，AppComponent的模板显示组件A，那么就需要在模板中使用RouterOutLet指令，来指定输入/user地址，AppComponent模板中组件A显示的位置</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;">b.如果想在模块中显示组件B，就可以在AppComponent中使用RouterLink指令</span></div><div><span style="font-size: 14pt;">    c</span><span style="font-size: 14pt;">.也可以使用控制器中Router对象的navigate方法，来改变浏览器的地址，从而实现路由的转换</span></div><div><span style="font-size: 14pt;">    d.而我们可以在URL的中传递参数，而传递的参数，就放在控制器的AppComponent的ActivatedRoute</span></div><div><br/></div><div><span style="font-size: 14pt;">    ---------------------------------------Angular属性绑定----------------------------------------------</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [48].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    意思是绑定star的值，star的值是true则，显示class类为glyphicon-star-empty，否则则显示默认样式</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [49].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    @Input是父属性将数据传递给子属性</span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;">--------------------------------------</span><span style="font-size: 14pt; color: rgb(166, 0, 196); font-weight: bold;">二、Angular依赖注入</span><span style="font-size: 14pt;">---------------------------------------------</span></div><div><span style="font-size: 18.6667px;">学习内容：</span></div><div><span style="font-size: 18.6667px;">    --&gt;什么是依赖注入模式及使用依赖注入的好处</span></div><div><span style="font-size: 18.6667px;">    --&gt;介绍Angular的依赖注入实现：注入器和提供器</span></div><div><span style="font-size: 18.6667px;">    --&gt;注入器的层级关系</span></div><div><span style="font-size: 18.6667px;">    </span></div><div><span style="font-size: 18.6667px;">    ----------------------------依赖注入模式要解决的问题---------------------------------</span></div><div><span style="font-size: 18.6667px;">    依赖注入：Dependency Injection简称DI</span></div><div><span style="font-size: 18.6667px;">    在依赖注入之前，要引用新的实例对象，需要不断地新建一个实例对象，之后再去引用，引用的过程可以看成是一个注入（把对象当成参数传递给方法，也可以说成是注入给这个方法）</span></div><div><span style="font-size: 18.6667px;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [50].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    控制反转：Inversion of Control 简称IOC（</span><span style="font-size: 14pt; color: rgb(166, 0, 196); font-weight: bold;">是指将代码的控制权从代码的内部转到代码的外部</span><span style="font-size: 14pt;">）</span></div><div><span style="font-size: 14pt;">    DI和IOC其实是两体一面的</span></div><div><span style="font-size: 14pt;">    Angular框架其实就是一个IOC容器，而Angular实现控制反转的手段就是DI（依赖注入）</span></div><div><span style="font-size: 14pt;">    ---------------------------使用依赖注入模式的好处-----------------------------------------</span></div><div><span style="font-size: 14pt;">    1、好处：低耦合、增加可重用性</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [51].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    在Angular中，指定providers来告诉哪些对象需要依赖注入，providers里面是一个数组</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [52].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    这段代码的意思是：<span style="font-size: 14pt; color: rgb(118, 0, 216); font-weight: bold;">注册一个类型是ProductService的Token，当有组件或指令声明说需要一个叫做ProductService的Token，实例化一个ProductService，并将其注入到目标对象</span></span></div><div><span style="font-size: 14pt;">    <span style="font-size: 14pt; font-weight: bold;">如何声明自己需要一个Token?</span></span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [53].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    在构造函数中声明一个自己需要的Token是什么，如上面的代码声明了需要一个名为ProductService（</span><span style="font-size: 14pt; font-weight: bold;">红色字体</span><span style="font-size: 14pt;">）对的Token，然后angular会去寻找对应的类是什么（即useClass是什么），然后实例化一个Token，注入到构造函数</span></div><div><span style="font-size: 14pt;">    2、好处：增加可测试性，可以不用等待其他组件的完成，可使用依赖注入，自行判断</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [54].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;">    --------------------------------------</span><span style="font-size: 18.6667px;">Angular的依赖注入实现</span><span style="font-size: 14pt;">----------------------------------------</span></div><div><span style="font-size: 14pt;">    学习内容</span></div><div><span style="font-size: 14pt;">    ---&gt;注入器：每一个组件都有一个注入器实例，负责注入组件需要的对象，一般情况下不需要直接调用注入器的方法，注入器会自动通过组件的构造函数，将组件所需的对象，注入到组件</span></div><div><span style="font-size: 14pt;">            </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [55].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    ---&gt;提供器</span></div><div><span style="font-size: 14pt;">            </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [56].png" type="image/png" data-filename="Image.png"/>等同于</span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [57].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">            先找productService，然后new一个useClass中的ProductService，然后再转入构造函数</span></div><div><span style="font-size: 14pt;">            </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [58].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">            </span><span style="font-size: 14pt;">先找productService，然后new一个useClass中的AnotherProductService，然后再转入构造函数</span></div><div><span style="font-size: 14pt;">            </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [59].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">            也可以直接返回一个方法</span></div><div><span style="font-size: 14pt;">            </span></div><div><span style="font-size: 14pt;">    ---&gt;实例：</span></div><div><span style="font-size: 14pt;">            ---&gt;第一步：声明一个服务</span></div><div><span style="font-size: 14pt;">            </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [60].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">            ---&gt;第二步：修改模板中的注射器</span></div><div><span style="font-size: 14pt;">            </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [61].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">            ---&gt;第三步：在组件的ts文件中注入</span></div><div><span style="font-size: 14pt;">            </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [62].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">            ---&gt;第四步：在页面中获取数据</span></div><div><span style="font-size: 14pt;">            </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [63].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;">    ---&gt;总结：</span></div><div><span style="font-size: 14pt;">            ---&gt;第一步：定义一个提供器</span></div><div><span style="font-size: 14pt;">            </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [64].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">            ---&gt;第二步：在组件中声明提供器，并注入到组件中</span></div><div><span style="font-size: 14pt;">            </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [65].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">            ---&gt;第三步：获取数据</span></div><div><span style="font-size: 14pt;">            </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [66].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">            ---&gt;第四步：在app.component.html中引入组件</span></div><div><span style="font-size: 14pt;">            </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [67].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">            1.当提供器声明在一个模板中，所有的组件都是可以使用的</span></div><div><span style="font-size: 14pt;">            2.当一个提供器声明在一个组件中，它只对声明它的组件和它的子组件可见 </span></div><div><span style="font-size: 14pt;">            3.当声明在组件的提供器和声明在模块中的提供器具有相同的Token是，<span style="font-size: 14pt; color: rgb(166, 0, 196); font-weight: bold;">组件中的提供器会覆盖掉模块中的提供器</span></span></div><div><span style="font-size: 14pt;">            4.</span><span style="font-size: 14pt; color: rgb(166, 0, 196); font-weight: bold;">一般情况下，要将提供器声明在模块中</span><span style="font-size: 14pt;">，只有提供器是在组件中声明并且对于其他组件不可见时，才声明在组件中</span></div><div><span style="font-size: 14pt;">            <span style="font-size: 14pt; font-weight: bold;">一个服务能不能注入到其他地方，是要看是否在app.module.ts的providers中声明来决定的</span></span></div><div><span style="font-size: 14pt;">            </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [68].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;">    ---&gt;@Injectable()</span><span style="font-size: 14pt;">装饰器</span></div><div><span style="font-size: 14pt;">            注意：</span></div><div><span style="font-size: 14pt;">            1、只有声明了的服务才可以注入到别的服务里面；</span></div><div><span style="font-size: 14pt;">            </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [69].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">            </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [70].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">            2、组件为什么可以不用</span><span style="font-size: 14pt;">@Injectable()，就可以注入服务？回答：<span style="font-size: 14pt; font-weight: bold;">因为组件中有@Component装饰器（以及管道装饰器）都是</span></span><span style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">@Injectable()装饰器</span></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;">        ----------------------------------使用工厂方法和值对象来声明提供器-------------------------------</span></div><div><span style="font-size: 14pt;">        在某些时候，我们的实例对象，需要根据某些条件下来决定要实例化哪些对象，或者调用构造对象时要传递参数，这时候请使用工厂提供器</span></div><div><span style="font-size: 14pt;">        </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [71].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">        在app.module.ts中声明工厂提供器，工厂方法创建的对象，是一个单例对象，工厂方法只会在第一个注入的方法时被调用一次，然后再所有被注入的组件中，都是同一个对象</span></div><div><span style="font-size: 14pt;">        </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [72].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">        问题1：解决工厂提供器依赖其他服务的耦合问题</span></div><div><span style="font-size: 14pt;">        在工厂方法中，使用</span><span style="font-size: 14pt; color: rgb(166, 0, 196); font-weight: bold;">deps参数（用来声明工厂方法依赖的参数，而实现低耦合）</span><span style="font-size: 14pt;">，angular会声明一个deps中的实例（也就是</span><span style="font-size: 14pt;">LoggerService</span><span style="font-size: 14pt;">），然后注入到useFactory中</span></div><div><span style="font-size: 14pt;">        问题2：解决工厂提供请依赖其他变量的问题</span></div><div><span style="font-size: 14pt;">        a.使用单一值来解决</span></div><div><span style="font-size: 14pt;">        </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [73].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">        b.使用一个对象来解决</span></div><div><span style="font-size: 14pt;">        </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [74].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;">        -------------------------------------注入器的层级关系------------------------------------------</span></div><div><span style="font-size: 14pt;">        </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [75].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">        </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [76].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">        以组件Product2为例，在Product2组件的构造函数中，注入了一个ProductService，首先会在自身找有没有该提供器，没有则去主组件app.module.ts中找，如果app.module.ts中也没有则去应用级注入去中去找，如果还是没有，则会报错</span></div><div><br/></div><div><span style="font-size: 14pt;">--------------------------------</span><span style="font-size: 14pt; color: rgb(166, 0, 196); font-weight: bold;">三、数据绑定，响应式编程和管道</span><span style="font-size: 14pt;">-----------------------------------------</span></div><div><span style="font-size: 18.6667px;">学习内容</span></div><div><span style="font-size: 18.6667px;">   </span> <span style="font-size: 18.6667px;">--&gt;</span><span style="font-size: 18.6667px;">数据绑定</span></div><div><span style="font-size: 18.6667px;">   </span> <span style="font-size: 18.6667px;">--&gt;</span><span style="font-size: 18.6667px;">响应式编程</span></div><div><span style="font-size: 18.6667px;">   </span> <span style="font-size: 18.6667px;">--&gt;</span><span style="font-size: 18.6667px;">管道</span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 18.6667px;">    -------------------------------------------数据绑定--------------------------------------------------</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [77].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    使用插值表达式的值显示在模板上</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [78].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    使用方括号将HTML标签的一个属性绑定到一个表达式上</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [79].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    使用小括号将组件控制器的一个方法绑定为模板上一个事件的处理器 </span></div><div><br/></div><div><span style="font-size: 14pt;">    ----&gt;事件绑定</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [80].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    注意：</span></div><div><span style="font-size: 14pt;">    1、右侧的表达式可以是一个函数调用，亦可以是一个表达式</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [81].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    2、右侧的函数调用可以是一个DOM事件，也可以是一个自定义的函数</span></div><div><br/></div><div><span style="font-size: 14pt;">    插值表达式和属性绑定其实是一个东西，要保证开发的一致性</span></div><div><span style="font-size: 14pt;">    例如在img标签中，属性绑定src和用插值表达式绑定src是一样效果的，在Angular中会自动把插值表达式绑定的src翻译成属性绑定</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [82].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;">    ----&gt;常见的事件绑定</span></div><div><span style="font-size: 14pt;">    1.DOM属性</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [83].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [84].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    2.HTML属性</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [85].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">   </span> <span style="font-size: 14pt; color: rgb(166, 0, 196); font-weight: bold;">DOM属性是变化的，而HTML属性是不变的</span><span style="font-size: 14pt;">。</span></div><div><span style="font-size: 14pt;">    -----&gt;HTML属性和DOM属性的关系</span></div><div><span style="font-size: 14pt;">    1、少量HTML属性和DOM属性之间有着1 ：1的映射，如id；</span></div><div><span style="font-size: 14pt;">    2、有些HTML属性没有对应的DOM属性，如colspan；</span></div><div><span style="font-size: 14pt;">    3、有些DOM属性没有对应的HTML属性，如textContent；</span></div><div><span style="font-size: 14pt;">    4、</span><span style="font-size: 14pt; font-weight: bold;">就算名字相同，HTML属性和DOM属性也不是同一样东西</span><span style="font-size: 14pt;">；</span></div><div><span style="font-size: 14pt;">    5、</span><span style="font-size: 14pt; font-weight: bold;">HTML属性的值指定了初始值；DOM属性的值表示当前值。DOM属性的值可以改变；HTML属性的值不能改变</span><span style="font-size: 14pt;">。</span></div><div><span style="font-size: 14pt;">    6、<span style="font-size: 14pt; font-weight: bold;">模板绑定是</span><span style="font-size: 14pt; color: rgb(166, 0, 196); font-weight: bold;">通过DOM属性和事件来工作的</span><span style="font-size: 14pt; font-weight: bold;">，而不是HTML属性</span></span></div><div><br/></div><div><span style="font-size: 14pt; font-weight: bold;">   </span> <span style="font-size: 14pt;">----&gt;AngularDOM属性绑定（</span><span style="font-size: 14pt; color: rgb(166, 0, 196); font-weight: bold;">Angular是通过DOM属性来绑定的，我们优先要使用DOM属性绑定数据，但是如果没有DOM属性可以绑定，那就是用HTML属性绑定</span><span style="font-size: 14pt;">）</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [86].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [87].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    <span style="font-size: 14pt; font-weight: bold;">在组件中定义的属性绑定，改变的是DOM属性，而不是HTML属性</span></span></div><div><span style="font-size: 14pt;">    注意：当使用不了DOM属性绑定时，只能使用HTML属性绑定</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [88].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    td没有DOM属性可以绑定</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [89].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    此时只能使用HTML属性绑定</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [90].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [91].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    </span></div><div><br/></div><div><span style="font-size: 14pt;">    ----&gt;HTML属性绑定</span></div><div><span style="font-size: 14pt;">    基本HTML属性绑定</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [92].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    CSS类绑定</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [93].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    样式绑定</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [94].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    双向数据绑定</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [95].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    使用[(ngModel)]来进行数据双向绑定，可以理解为<span style="font-size: 14pt;"><span style="font-size: 14pt; color: rgb(166, 0, 196); font-weight: bold;">盒子里的香蕉</span></span></span></div><div><span style="font-size: 14pt;">    注意：如果ngModel不起作用，要确认app.module.ts中，是否引入了表单模块</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [96].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;">    ---------------------------------响应式编程---------------------------------------------</span></div><div><span style="font-size: 14pt;">    <span style="font-size: 14pt; color: rgb(166, 0, 196); font-weight: bold;">在响应式编程中，万物皆是流</span></span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [97].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    ---&gt;可观察对象Observable（流）：表示一组值或者事件的集合</span></div><div><span style="font-size: 14pt;">    ---&gt;观察者Observer：一个回调函数集合，它知道怎么去监听被Observable发送的值</span></div><div><span style="font-size: 14pt;">    ---&gt;订阅Subscription：表示一个可观察对象，主要用于取消注册（subscription.unsubscribe()这个方法，取消关注）</span></div><div><span style="font-size: 14pt;">    ---&gt;操作符Operators：纯粹的函数，使开发者可以以函数编程的方式处理集合</span></div><div><span style="font-size: 14pt;">    A被赋值为B和C的值。这时，如果我们改变B的值，A的值并不会随之改变。而如果我们运用一种机制，当B或C的值发生变化的时候，A的值也随之改变，这样就实现了“响应式”</span></div><div><span style="font-size: 14pt;">    下面三个重要的概念是响应式流API的构建基础：</span></div><div><span style="font-size: 14pt;">    ---&gt;</span><span style="font-size: 14pt; font-weight: bold;">发布者</span><span style="font-size: 14pt;">是事件的发送方，可以向它订阅</span></div><div><span style="font-size: 14pt;">    ---&gt;</span><span style="font-size: 14pt; font-weight: bold;">订阅者</span><span style="font-size: 14pt;">是事件订阅方</span></div><div><span style="font-size: 14pt;">    ---&gt;</span><span style="font-size: 14pt; font-weight: bold;">订阅</span><span style="font-size: 14pt;">将</span><span style="font-size: 14pt; font-weight: bold;">发布者</span><span style="font-size: 14pt;">和</span><span style="font-size: 14pt; font-weight: bold;">订阅者</span><span style="font-size: 14pt;">联系起来，使订阅者可以向发布者发送信号</span></div><div><span style="font-size: 14pt;">    响应式编程就是：<span style="font-size: 14pt; font-weight: bold;">异步数据流编程</span></span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [98].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    这是一个最简单的响应式编程的例子</span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;">    使用模板本地变量可以获取input的值</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [99].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [100].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    ---&gt;案例：现在有个搜索框，在输入东西后就开始进行搜索。我想搜索IBM，当我输入I的时候就会触发keyUp事件去服务器搜索，当我输入IB的时候也会去服务器搜索，这不是我们想要的。我们想输入完IBM后去搜索。这里可以设置一个</span><span style="font-size: 14pt; font-weight: bold;">时间间隔</span><span style="font-size: 14pt;">，在这个时间间隔内没有再输入东西的时候就去服务器搜索。这个功能用传统的JavaScript实现起来比较麻烦</span></div><div><span style="font-size: 14pt;">    -----&gt;第一步：修改app.module.ts</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [101].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    -----&gt;第二步：新建Bind组件，并修改其ts文件</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [102].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [103].png" type="image/png" data-filename="Image.png" width="827"/></span></div><div><span style="font-size: 14pt;">    当搜索框中的值改变时，就会在控制台打印出来</span></div><div><span style="font-size: 14pt;">    </span></div><div><span style="font-size: 14pt;">    但是如果这样来输入字符后，就不会马上打印，而是会在500毫秒内没有再输入新东西时才会去打印</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [104].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    <span style="font-size: 14pt; font-weight: bold;">注意：如果有报错import ‘rxjs/Rx’，可以使用</span></span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [105].png" type="image/png" data-filename="Image.png"/></span></div><div><br/></div><div><br/></div><div><span style="font-size: 14pt;">    ---------------------------------------管道-----------------------------------------------</span></div><div><span style="font-size: 14pt;">    在Angular中，管道用来处理这种原始值到显示值的转化（也就是把值转化成简化或者angular其他一些内置管道的格式）</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [106].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    date：用来转化时间的，可以传入参数，使时间按照参数的样式显示</span></div><div><span style="font-size: 14pt;">    number：用来转化数字的，</span><span style="font-size: 14pt; color: rgb(166, 0, 196); font-weight: bold;">2.1-4的理解为，保留两位整数，小数最少保留1位，最多保留4位，</span><span style="font-size: 14pt;">保留的过程中有四舍五入</span></div><div><span style="font-size: 14pt;">    async：是用来处理异步流的</span></div><div><span style="font-size: 14pt;">    ----&gt;自定义管道</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [107].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    生成一个管道，管道名字为multiple，是在pipe目录下</span></div><div><span style="font-size: 14pt;">    注意：管道和组件一样也是要在app.module.ts中声明的，如果没有，要自己在app.module.ts中的declarations中加入</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [108].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [109].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    Pipe装饰器，使用自定义管道时，要使用Pipe装饰器中的name，transform方法规定了原始值和参数格式，return就是返回转化后的值，<span style="font-size: 14pt; font-weight: bold;">value是原始值，args是参数格式</span></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;">---------------------------------------</span><span style="font-size: 14pt; color: rgb(166, 0, 196); font-weight: bold;">四、组件间通讯</span><span style="font-size: 14pt;">---------------------------------------------------</span></div><div><span style="font-size: 18.6667px;">学习内容：</span></div><div><span style="font-size: 18.6667px;">    ---&gt;组件的输入输出属性（父子组件之间传值）</span></div><div><span style="font-size: 18.6667px;">    ---&gt;使用中间人模式传递数据（在没有父子关系的组件之间传值）</span></div><div><span style="font-size: 18.6667px;">    ---&gt;组件生命周期以及angular的变化发现机制</span></div><div><br/></div><div><span style="font-size: 18.6667px;">    -----------------------------------@Input输入属性------------------------------------------</span></div><div><span style="font-size: 18.6667px;">    @Input输入属性，用来接收父组件传递的数据</span></div><div><span style="font-size: 18.6667px;">    ---&gt;第一步：在子组件中声明@Input输入属性，以及传递进来的参数</span></div><div><span style="font-size: 18.6667px;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [110].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    ---&gt;第二步：在子组件中体现</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [111].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    ---&gt;第三步：在父组件中声明并传递参数给子组件</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [112].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [113].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    以上就是父组件向子组件传递数据，还有就是通过路由传递数据</span></div><div><span style="font-size: 14pt;">    方法一：@Input()输入属性通过属性传递数据（</span><span style="font-size: 14pt; font-weight: bold;">只能在有父子关系的组件中，由父组件传递给子组件</span><span style="font-size: 14pt;">）；</span></div><div><span style="font-size: 14pt;">    方法二：路由参数输入属性，构造函数</span></div><div><br/></div><div><span style="font-size: 14pt;">    ----------------------------------@Output输出属性------------------------------------------</span></div><div><span style="font-size: 14pt;">    @Output()子组件向父组件传递数据</span></div><div><span style="font-size: 14pt;">    ---&gt;EventEmitter&lt;泛型&gt;输出属性</span></div><div><span style="font-size: 14pt;">    ---&gt;捕捉EventEmitter和捕捉原生DOM的事件是一样的，事件绑定</span></div><div><span style="font-size: 14pt;">    ---&gt;双向数据绑定，输出属性的名字 = 输入属性的名字 + change</span></div><div><span style="font-size: 14pt;">    子组件输出属性</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [114].png" type="image/png" data-filename="Image.png" width="642"/></span></div><div><span style="font-size: 14pt;">    使用@Output()属性，输出lastPrice1事件，然后lastPrice1事件将PriceQuote的定义发射出去</span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;">    父组件定义属性，并绑定发射的lastPrice1事件，定义priceQuoteHandler（$event）,在绑定的priceQuoteHandler方法中，返回event，event参数中返回priceQuote</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [115].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [116].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;">    -----------------------------------------中间人模式---------------------------------------------------</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [117].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    组件1是</span><span style="font-size: 14pt;">组件</span><span style="font-size: 14pt;">2、6、3的中间人，组件2是</span><span style="font-size: 14pt;">组件</span><span style="font-size: 14pt;">4、5的中间人，组件3是组件7 、8的中间人</span></div><div><span style="font-size: 14pt;">    ---&gt;第一步：报价组件输出属性</span></div><div><span style="font-size: 14pt;">    报价组件绑定点击事件，点击事件将buy1的事件发送出去，携带这PriceQuote数据</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [118].png" type="image/png" data-filename="Image.png" width="720"/></span></div><div><span style="font-size: 14pt;">    ---&gt;第二步：报价组件修改</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [119].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    ---&gt;第三步：中间人模式绑定事件</span></div><div><span style="font-size: 14pt;">    主组件绑定发射出来的buy1事件，定义了buyHandler事件，返回的event参数就是PriceQuote</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [120].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;">---&gt;第四步：中间人模式获取事件属性</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [121].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;">---&gt;第五步：下单组件修改</span></div><div><span style="font-size: 14pt;">    同时下单组件绑定priceQuote属性，属性绑定为buyHandler的返回值priceQuote</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [122].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [123].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;">---&gt;第六步：下单组件引入数据</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [124].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    如果两个组件之间没有共同的父组件（或者中间人），就应该使用依赖注入</span></div><div><br/></div><div><span style="font-size: 14pt;">    -------------------------------组件的生命周期----------------------------------------------</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [125].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    红色的方法只会调用一次，而绿色的方法会被多次调用，组件的生命周期分成三个阶段，组件初始化、变化检测、组件销毁阶段，而变化检测阶段的四个方法（ngOnChanges、ngDoCheck、ngAfterContentChecked、ngAfterViewChecked）和初始化中的四个绿色同名方法是一样的，其实一共就九个方法</span></div><div><span style="font-size: 14pt;">    ---&gt;在组件中的生命周期</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [126].png" type="image/png" data-filename="Image.png" width="810"/></span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [127].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    生命周期钩子函数在组件中的调用顺序如上图所示</span></div><div><span style="font-size: 14pt;">    ------------------------------------</span><span style="font-size: 14pt;">ngOnChanges钩子函数----------------------------------------</span></div><div><span style="font-size: 14pt;">    -----&gt;ngOnChanges钩子函数（父组件初始化或修改子组件的输入参数时会被调用），如果没有输入属性，ngOnChanges永远不会被调用，ngOnChanges首次调用一定是发生在ngOnInit之前</span></div><div><span style="font-size: 14pt;">    -------&gt;可变对象：在JavaScript中，对象是可变的</span></div><div><span style="font-size: 14pt;">                </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [128].png" type="image/png" data-filename="Image.png" width="628"/></span></div><div><span style="font-size: 14pt;">                对象user的name属性指向值为Jerry的字符串，当第二行的代码被执行时，user.name的地址指向新的内存，就是值为honny的字符串的地址，user本身还是保持被创建时的内存地址，换句话说，只是改变对象user地址的内容，而不是它指向的地址</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;">-------&gt;不可变对象：</span><span style="font-size: 14pt;">在JavaScript中，字符串是不可变的，意味着字符串在内存中被创建时，他的值永远不会被改变</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;">    </span><img src="Angular4实战_files/Image [129].png" type="image/png" data-filename="Image.png"/></div><div>                       <span style="font-size: 14pt;">例子：在内存中创建了一个名为&quot;Hello&quot;的字符串，第二行代码并不改变第一个字符串，而是在内存中，新建一个名为&quot;Hello world&quot;的字符串，对于greeting这个变量来说，它的值是变了，它指向的内存地址改变了</span>    <img src="Angular4实战_files/Image [130].png" type="image/png" data-filename="Image.png"/></div><div><span style="font-size: 14pt;">                案例：使用父组件的数据绑定子组件的输入属性，来观察OnChanges钩子函数</span></div><div><span style="font-size: 14pt;">                ---&gt;第一步：在子组件中定义数据类型并输出，同时绑定ngOnChanges事件</span></div><div><span style="font-size: 14pt;">                </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [131].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">                ---&gt;第二步：在子组件中体现</span></div><div><span style="font-size: 14pt;">                </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [132].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">                ---&gt;第三步：在父组件中定义数据并绑定子组件的输出属性</span></div><div><span style="font-size: 14pt;">                </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [133].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">                </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [134].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">                ---&gt;第四步，当父组件双向绑定的数据，改变了子组件的数据，可以看出改变字符串会调用OnChanges函数，而改变对象则不会</span></div><div><span style="font-size: 14pt;">                </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [135].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    -------------------------------------变更检测和DoCheck钩子--------------------------------------</span></div><div><span style="font-size: 14pt;">    Angular的变更检测是根据zone.js来实现的，变更检测是保证组件的属性变化和页面的变化时同步的，</span></div><div><span style="font-size: 18.6667px;">变更检测只是将改变反应到页面上，而永远不会改变属性的值</span></div><div><span style="font-size: 18.6667px;">    -------&gt;变更检测</span></div><div><span style="font-size: 18.6667px;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [136].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    默认都是采用Default策略，只要父组件改变了，就会进行检测，除非子组件声明了变更策略是OnPush，否则就会一直检测</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [137].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    该图孙子组件1发生改变，除了子组件2（声明了OnPush策略）不用检测，其他都需要检测</span></div><div><span style="font-size: 14pt;">    <span style="font-size: 14pt;"><span style="font-size: 14pt; color: rgb(166, 0, 196); font-weight: bold;">注意：当使用带有Check关键字的钩子时，要写非常高效非常轻量级的代码，不然会影响性能</span></span></span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [138].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    只是在页面上点击，就会触发事件，而真正改变的东西只有user.name改变的时候，所以要写非常高效非常轻量级的代码，不然带有check关键字的钩子会被多次调用而影响性能</span></div><div><span style="font-size: 14pt;">    </span></div><div><br/></div><div><span style="font-size: 14pt;">    --------------------------------------View钩子------------------------------------------------</span></div><div><span style="font-size: 14pt;">    ---&gt;第一步：在子组件中定义方法</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [139].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    ---&gt;第二步：在父组件中声明ViewChild属性</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [140].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    ---&gt;第三步：向子组件传参数</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [141].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    <span style="font-size: 14pt; font-weight: bold;">注意：</span><span style="font-size: 14pt; color: rgb(166, 0, 196); font-weight: bold;">1.ngAfterViewInit钩子在ngAfterViewChecked钩子之前；2.这两个方法都是在视图被组装完毕以后来调用的；3.如果组件有子组件，要当所有的子组件的视图被组装完毕后，父组件的</span></span><span style="font-size: 14pt;"><span style="font-size: 14pt; color: rgb(166, 0, 196); font-weight: bold;">ngAfterViewInit钩子和ngAfterViewChecked钩子才会被调用；4.不要在两个方法里面改变视图中绑定的数据，如果要改变，也要写在setTimeOut里面，否则会抛出异常（因为这两个钩子时在页面组装完毕后调用的）</span></span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [142].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;">    ------------------------------------------ngContent指令----------------------------------------------</span></div><div><span style="font-size: 14pt;">    ng-content用来标记一个投影点，用来将父组件的某一个片段投影到子组件</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [143].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    父组件绑定的HTML代码会投影到子组件对应的ng-content的位置</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [144].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    不过使用innerHTML 属性绑定，也可以渲染HTML代码，但是只能绑定自身组件，会有所限制，优先考虑ng-content</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [145].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [146].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;">    --------------------------------ngAfterContentInit和ngAfteContentChecked-----------------------</span></div><div><span style="font-size: 14pt;">    同时在父子组件中都定义</span><span style="font-size: 14pt;">ngAfterContentInit和ngAfteContentChecked</span><span style="font-size: 14pt;"> ，结果是这样的</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [147].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    -----------------------------------ngOnDestroy-------------------------------------------------------</span></div><div><span style="font-size: 14pt;">    在路由切换的时候会执行ngOnDestroy这个钩子，前一个路由的钩子会被销毁，而后一个钩子会被创建</span></div><div><br/></div><div><span style="font-size: 14pt;">    --------------------------------------------小结-------------------------------------------------------</span></div><div><span style="font-size: 14pt;">    --&gt;父子组件之间应该避免直接访问彼此的内部，而应该通过输入输出属性来通讯</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;">--&gt;组件可以通过输出属性发射自定义事件，这些事件可以携带任何你想要携带的数据</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;">--&gt;在没有父子关系的组件之间，尽量使用中间人模式进行通讯</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;">--&gt;父组件可以在运行时投影一个或多个模板片段到子组件中</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;">--&gt;每个Angular组件都提供了一组生命周期钩子，供你在某些特定的时间发生时执行相应的逻辑 </span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;">--&gt;angular的变更检测机制会监控组件属性的变化并自动更新视图。这个检测非常频繁并且默认是针对整个组件树的，所以实现相关钩子时要慎重</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;">--&gt;你可以标记你的组件树中的一个分支，使其被排除在变更检测机制之外</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;">    </span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;">---------------------------------------------</span><span style="font-size: 14pt;"><span style="font-size: 14pt;"><span style="font-size: 14pt; color: rgb(166, 0, 196); font-weight: bold;">5.表单处理</span></span></span><span style="font-size: 14pt;">---------------------------------------------------</span></div><div><span style="font-size: 18.6667px;">学习内容</span></div><div><span style="font-size: 18.6667px;">    ---&gt;模板式表单</span></div><div><span style="font-size: 18.6667px;">    </span><span style="font-size: 18.6667px;">---&gt;响应式表单</span></div><div><span style="font-size: 18.6667px;">    </span><span style="font-size: 18.6667px;">---&gt;表单验证</span></div><div><span style="font-size: 18.6667px;"><br/></span></div><div><span style="font-size: 18.6667px;">    -----------------------------------------Angular表单API---------------------------------------------</span></div><div><span style="font-size: 18.6667px;">    纯HTML表单：显示表单项、校验用户输入、提交表单数据</span></div><div><span style="font-size: 18.6667px;">    ---&gt;模板式表单：</span><span style="font-size: 18.6667px; color: rgb(166, 0, 196); font-weight: bold;">表单的数据模型是通过组件模板中的相关指令来定义的</span><span style="font-size: 18.6667px;">，因为使用这种方式定义表单的数据模型时，我们会受限于HTML的语法，所以，</span><span style="font-size: 18.6667px; color: rgb(166, 0, 196); font-weight: bold;">模板驱动方式只适合用于一些简单的场景</span></div><div><span style="font-size: 18.6667px;">    ---&gt;响应式表单：<span style="font-size: 18.6667px; color: rgb(166, 0, 196); font-weight: bold;">使用响应式表单时，你通过编写TypeScript代码而不是HTML代码来创建一个底层的数据模型，在这个模型定义好以后，你使用一些特定的指令，将模板上的HTML元素与底层的数据模型连接在一起</span></span></div><div><span style="font-size: 18.6667px;">   </span> <span style="font-size: 18.6667px; font-weight: bold;">不同的地方</span><span style="font-size: 18.6667px;">：1.不管是哪种表单，都有一个对应的数据模型来存储表单的数据。在模板式表单中，数据模型是由angular基于你组件模块中的指令隐式创建的。而在响应式表单中，你通过编码明确的创建数据模型然后将模板上的html元素与底层的数据模型连接在一起；2.数据模型并不是一个任意的对象，它是一个由angular/form模块中的一些特定的类，如FormControl、FormGroup、FormArray等组成的。 在模板式表单中，你是不能直接访问到这些类的；3.响应式表单并不会替你生成HTML，模块仍然需要你自己来编写；4.区分模板式表单和响应式表单，如果都是什么ngModel、ngSubmit这些带ng的指令，就是模板式表单，如果是前缀是formGroup、FormControl什么的，就是响应式表单</span></div><div><span style="font-size: 18.6667px;">    不管要使用哪种表单，都要在app.module.ts中引入</span></div><div><span style="font-size: 18.6667px;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/1554971756(1).png" type="image/png" data-filename="1554971756(1).png"/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;">    ----------------------------------模板式表单-------------------------------------------------------</span></div><div><span style="font-size: 18.6667px;">    --&gt;NgForm:自动添加到每个form标签，接管Form指令</span></div><div><span style="font-size: 18.6667px;">    &gt;&gt;&gt;&gt;&gt;隐式创建一个FormGroup类的实例，FormGroup类用来存储数据模型和表单模型</span></div><div><span style="font-size: 18.6667px;">    </span><span style="font-size: 18.6667px;">&gt;&gt;&gt;&gt;&gt;</span><span style="font-size: 18.6667px;">自动发现NgModel的所有子元素，并自动将其添加到表单数据模型中</span></div><div><span style="font-size: 18.6667px;">    </span><span style="font-size: 18.6667px;">&gt;&gt;&gt;&gt;&gt;</span><span style="font-size: 18.6667px;">也可以绑定到其他标签上</span></div><div><span style="font-size: 18.6667px;">    </span><span style="font-size: 18.6667px;">&gt;&gt;&gt;&gt;&gt;</span><span style="font-size: 18.6667px;">如果想使用原生Form，可以在标签添加ngNoForm属性</span></div><div><span style="font-size: 18.6667px;">    </span><span style="font-size: 18.6667px;">&gt;&gt;&gt;&gt;&gt;</span><span style="font-size: 18.6667px;">NgForm可以被模板本地变量引用，以便在模板中访问NgForm对象的实例</span></div><div><span style="font-size: 18.6667px;">    </span><span style="font-size: 18.6667px;">&gt;&gt;&gt;&gt;&gt;</span><span style="font-size: 18.6667px;">使用ngSubmit代替submit按钮，阻止跳转</span></div><div><span style="font-size: 18.6667px;">    </span><span style="font-size: 18.6667px;">--&gt;NgModel：双向数据绑定，标记一个html元素成为表单的一部分；隐式创建一个FormControl类的实例，利用FormControl来存储数据的值</span></div><div><span style="font-size: 18.6667px;">    </span><span style="font-size: 18.6667px;">--&gt;NgModelGroup</span></div><div><span style="font-size: 18.6667px;">    </span><span style="font-size: 18.6667px;">&gt;&gt;&gt;&gt;&gt;</span><span style="font-size: 18.6667px;">代表表单的一部分，允许将表单字段组织在一起，形成更清晰的层次关系</span></div><div><span style="font-size: 18.6667px;">    </span><span style="font-size: 18.6667px;">&gt;&gt;&gt;&gt;&gt;</span><span style="font-size: 18.6667px;">隐式创建FormGroup的实例</span></div><div><span style="font-size: 18.6667px;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [148].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [149].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [150].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [151].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;">---------------------------------------------</span><span style="font-size: 14pt;">响应式表单</span><span style="font-size: 14pt;">------------------------------------------------</span></div><div><span style="font-size: 14pt;">    响应式表单ReactiveFormsModule（可适配多个渲染器）：可以直接访问数据模型相关的类，但是由于不可引用，只能在代码汇总操作数据模型，不能再模板中操作</span></div><div><span style="font-size: 14pt;">    ---&gt;第一步：创建数据模型，用来保存表单数据的数据结构</span></div><div><span style="font-size: 14pt;">    ----&gt;FormGroup</span></div><div><span style="font-size: 14pt;">            ---&gt;一般用来代表整个表单，或者表单字段固定的子集</span></div><div><span style="font-size: 14pt;">            ---&gt;如果其中一个FromControl是无效的，整个FormGroup就是无效的</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;">----&gt;FormControl</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;">----&gt;FormArray</span></div><div><span style="font-size: 14pt;">            ---&gt;一般用来代表可以增长的字段集合</span></div><div><span style="font-size: 14pt;">            </span><span style="font-size: 14pt;">---&gt;类似FromGroup，但是有一个长度属性</span></div><div><span style="font-size: 14pt;">            </span><span style="font-size: 14pt;">---&gt;没有key，只能通过序号访问相关的元素</span></div><div><span style="font-size: 14pt;">        ------------------------------------------响应式表单指令--------------------------------------------</span></div><div><span style="font-size: 14pt;">        </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [152].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">        第二列的需要属性绑定语法；而第三列只需要指定一个属性名即可，只能用在FormGroup指令覆盖的范围之内</span></div><div><span style="font-size: 14pt;">        </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [153].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">        带有Name的都要在FormGroup中</span></div><div><span style="font-size: 14pt;">        </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [154].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">        -----------------------------------响应式表单重构-------------------------------------</span></div><div><span style="font-size: 14pt;">        模板式表单</span></div><div><span style="font-size: 14pt;">        </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [155].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">        </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [156].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">        响应式表单</span></div><div><span style="font-size: 14pt;">        </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [157].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">        </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [158].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">        使用FormBuilder进行响应式表单的重构</span></div><div><span style="font-size: 14pt;">        </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [159].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;">    --------------------------------------------------表单检验---------------------------------------------</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [160].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    对象是FormGroup的话，不能和FormControl一样直接写入校验方法，而是要声明在 validators里面</span></div><div><span style="font-size: 14pt;">    在页面提示校验信息，可以这样写</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [161].png" type="image/png" data-filename="Image.png" width="829"/></span></div><div><span style="font-size: 14pt;">    使用异步的订阅流来模拟发出请求</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [162].png" type="image/png" data-filename="Image.png" width="846"/></span></div><div><span style="font-size: 14pt;">    formModel.status的值一开始会呈现INVALID，在手机号码输入正常后会显示PENDING，等待五秒后，会返回VALID</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [163].png" type="image/png" data-filename="Image.png" width="665"/></span></div><div><span style="font-size: 14pt;">    要注意引入Observable以及of、delay方法</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [164].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    --------------------------------------状态字段-------------------------------------------------</span></div><div><span style="font-size: 14pt;">    ---&gt;touched和untouched：是否获取焦点（把用户名的两个校验用一个div包含起来，鼠标失去焦点后显示）</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [165].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;">---&gt;pristine和dirty： 如果字段的值改变过，则pristine为false，dirty为true（把手机号的校验用div包起来，鼠标失去焦点不显示，只有在输入字符后才会检验提示）</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [166].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;">---&gt;pending：当一个字段处于异步校验时，属性为true，这个时候可以显示一段文字或图片，来告诉用户正在校验（在手机号码验证下面添加一个div，用于pending示例）</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/1555055635(1).png" type="image/png" data-filename="1555055635(1).png"/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;">    ------------------------------------------模板式表单校验---------------------------------------------</span></div><div><span style="font-size: 14pt;">    使用指令来进行模板式表单的校验，要先声明一个指令</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [167].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    指令和组件很类似，可以理解为没有HTML模板的组件</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [168].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [169].png" type="image/png" data-filename="Image.png" width="833"/></span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [170].png" type="image/png" data-filename="Image.png"/> </span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;">---------------------------------------------</span><span style="font-size: 14pt; color: rgb(166, 0, 196); font-weight: bold;">6.与服务器通讯</span><span style="font-size: 14pt;">----------------------------------------------</span></div><div><span style="font-size: 18.6667px;">学习内容：</span></div><div><span style="font-size: 18.6667px;">---&gt;创建Web服务器</span></div><div><span style="font-size: 18.6667px;">---&gt;HTTP通讯</span></div><div><span style="font-size: 18.6667px;">---&gt;WebSocket通讯</span></div><div><span style="font-size: 18.6667px;"><br/></span></div><div><span style="font-size: 18.6667px;">    &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;创建Web服务器&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span></div><div><span style="font-size: 18.6667px;">    学习内容：</span></div><div><span style="font-size: 18.6667px;">    ---&gt;使用NodeJS创建服务</span></div><div><span style="font-size: 18.6667px;">    </span><span style="font-size: 18.6667px;">---&gt;使用Express创建restful的http服务</span></div><div><span style="font-size: 18.6667px;">    </span><span style="font-size: 18.6667px;">---&gt;监控服务器文件的变化</span></div><div><br/></div><div><span style="font-size: 18.6667px;">    ----------------------------------------使用NodeJS创建服务------------------------------------------</span></div><div><span style="font-size: 14pt;">    1.先定义一个文件夹server，然后使用npm init -y 引入带有默认配置的package.json文件</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [171].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    2.使用npm i @types/node -save命令，引入node的第三方包</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [172].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    3.自定义文件tsconfig.json文件</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [173].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    compilerOptions是编译器的配置</span></div><div><span style="font-size: 14pt;">    target：目标是把代码编译成es5的JavaScript脚本</span></div><div><span style="font-size: 14pt;">    module：module用的规范是commonjs</span></div><div><span style="font-size: 14pt;">    emitDecoratorMetadata：跟装饰器相关</span></div><div><span style="font-size: 14pt;">    experimentalDecorators：</span><span style="font-size: 14pt;">跟装饰器相关</span></div><div><span style="font-size: 14pt;">    outDir：生成的文件要放在一个叫做build的目录里</span></div><div><span style="font-size: 14pt;">    lib：开发的时候用es6语法</span></div><div><span style="font-size: 14pt;">    exclude：排除了“node_modules”文件夹不编译</span></div><div><span style="font-size: 14pt;">    4.要在TypeScript中设置文件</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [174].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    5.在文件夹中创建server空文件夹，并创建hello_server.ts文件</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [175].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    6.使用node build/hello_server.js命令，运行服务，即可在浏览器中运行localhost：8000</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [176].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;">    ---------------------------------------</span><span style="font-size: 18.6667px;">使用Express创建restful的http服务------------------------------</span></div><div><span style="font-size: 18.6667px;">    1.使用npm install express --save安装express 框架</span></div><div><span style="font-size: 18.6667px;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [177].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    2.安装express的类型定义文件</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [178].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    3.在server文件夹中创建aution_server.ts文件</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [179].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    4.启动服务</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [180].png" type="image/png" data-filename="Image.png" width="726"/></span></div><div><span style="font-size: 14pt;">    5.安装nodemon，在服务改变时会自动重启服务，不需要手动去重启服务（</span><span style="font-size: 18.6667px;">监控服务器文件的变化</span><span style="font-size: 14pt;">）</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [181].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    6.安装好后，用nodemon bulid/aution_server.js来启动服务，nodemon可以实现页面热更新</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [182].png" type="image/png" data-filename="Image.png" width="832"/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 18.6667px;">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;Http通讯&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span></div><div><span style="font-size: 14pt;">    学习内容：</span></div><div><span style="font-size: 14pt;">    ---&gt;了解angular的Http服务</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;">---&gt;发送http请求</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;">---&gt;处理http响应</span></div><div><span style="font-size: 14pt;">    ------------------------------------------------</span><span style="font-size: 14pt;">Http服务---------------------------------------------</span></div><div><span style="font-size: 14pt;">    1.使用一个Http服务：是订阅了get请求才会发出请求，get方法只是定义了一种服务</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [183].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    2.同时要在app.module.ts中声明HTTPClientModule</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [184].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    注意：在angular2是使用HTTPModule，而Angular4以上是使用HTTPClientModule来使用http服务的</span></div><div><span style="font-size: 14pt;">    3.要在根目录创建proxy.conf.json</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [185].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    4.在根目录的package.json文件下修改start命令</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [186].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    5.同时修改请求的路径</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [187].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [188].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;">    在angular中，也可以使用一个异步的async管道来请求数据</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [189].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [190].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    </span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 18.6667px;">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;WebSocket通讯&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span></div><div><span style="font-size: 14pt;">    学习内容：</span></div><div><span style="font-size: 14pt;">    ---&gt;了解WebSocket协议</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;">---&gt;创建WebSocket服务器</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;">---&gt;使用WebSocket协议通讯</span></div><div><span style="font-size: 14pt;">    -----------------------------------------</span><span style="font-size: 14pt;">了解WebSocket协议------------------------------------------</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [191].png" type="image/png" data-filename="Image.png"/></span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [192].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    区别：1.在进行HTTP协议时，服务器连接，数据传输方向只能有一种（即http请求或者http响应），不能同时发送数据和请求数据；2.在进行WebSocket协议，服务器连接，可以同时发送数据和请求数据；3.WebSocket是一个常连接协议，不需要在每次发送数据时，建立连接，通讯的延迟要比Http协议要低；</span></div><div><span style="font-size: 14pt;">4.由于</span><span style="font-size: 14pt;">WebSocket协议常连接的存在，不要每次请求时都携带连接相关的信息，请求的数据要比Http协议的要少</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;">-----------------------------------------</span><span style="font-size: 14pt;">了解WebSocket协议------------------------------------------</span></div><div><span style="font-size: 14pt;">    安装ws协议的命令</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [193].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    安装对应的类型对应文件</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [194].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [195].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    1.服务器端：</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [196].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    意思是在端口8085上面创建一个新的Server，在有任何一个客户端连接这个服务器的时候，给这个客户端推送一个信息，webs</span><span style="font-size: 14pt;">ocket.on方法是接受客户端提交的消息，http是通过订阅http服务的get或post方法返回的流来处理服务器的响应数据，但是Angular并没有提供一个类似http服务端的类来从WebSocket中产生一个流，所以要自己写一个服务来返回流</span></div><div><span style="font-size: 14pt;">    2.client客户端姓名中新生成一个服务 ng g service shared/websocket</span></div><div><span style="font-size: 14pt;">    修改web-socket.service.ts</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [197].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    3.新建一个组件ng g component webSocket</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [198].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    4.修改web-socket.component.html    </span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [199].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    5.要修改app.module.ts</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [200].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    之后启动服务器端以及客户端项目，之后访问</span> <span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;;"><a href="http://localhost:4200/" style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;; color: rgb(103, 149, 181);">http://localhost:4200/</a>，</span><span style="font-size: 14pt;">查看浏览器的控制台可以看到“这个消息是服务器主动推送”，然后点击按钮，查看server项目的控制台会看到“ 接收到消息：Hello from client”</span></div><div><span style="font-size: 14pt;">    6.修改服务器端的aution_service.ts</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [201].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    遍历每个客户端，每2秒给每个客户端推送消息</span></div><div><span style="font-size: 14pt;">    </span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [202].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [203].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">---------------------------------------------<span style="font-size: 14pt; color: rgb(166, 0, 196); font-weight: bold;">7</span></span><span style="font-size: 14pt; color: rgb(166, 0, 196); font-weight: bold;">.构建和部署</span><span style="font-size: 14pt;">----------------------------------------------</span></div><div><span style="font-size: 18.6667px;">学习内容：</span></div><div><span style="font-size: 18.6667px;">---&gt;构建：编译和合并——在项目中执行 ng build </span></div><div><span style="font-size: 18.6667px;">---&gt;部署：与服务器整合</span></div><div><span style="font-size: 18.6667px;">    执行完构建项目ng build命令后，会在项目中生成dist文件夹，将文件夹中的文件拷贝到服务端项目的新建client文件夹中</span></div><div><span style="font-size: 18.6667px;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [204].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    在aution_server.ts文件中修改</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [205].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [206].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 14pt;">    当访问根目录的时候，希望express这个框架去找静态的文件，路径是在当前文件夹的上级client文件夹中</span></div><div><span style="font-size: 14pt;">    添加新的步数策略，如图可以解决构建后无法跳转路由的问题，url出现一个#号</span></div><div><span style="font-size: 14pt;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [207].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 18.6667px;">---&gt;多环境：一套代码支持多环境</span></div><div><span style="font-size: 18.6667px;">    </span><span style="font-size: 14pt;"><img src="Angular4实战_files/Image [208].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 18.6667px;">    </span></div><div><span style="font-size: 14pt;">---------------------------------------------<span style="font-size: 14pt; font-weight: bold; color: rgb(166, 0, 196);">8</span></span><span style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold; color: rgb(166, 0, 196);">.</span></span><span style="font-size: 14pt; color: rgb(166, 0, 196); font-weight: bold;">总结</span><span style="font-size: 14pt;">----------------------------------------------</span></div><div><span style="font-size: 18.6667px;">开发流程：设计！设计！设计！</span></div><div><span style="font-size: 18.6667px;">1.使用Angular-CLI工具创建一个新的项目</span></div><div><span style="font-size: 18.6667px;">2.按照你们之前设计的组件关系开始从下往上编写组件</span></div><div><span style="font-size: 18.6667px;">3.按照父子关系组装组件并配置路由</span></div><div><span style="font-size: 14pt;">4.在开发环境上测试应用</span></div><div><span style="font-size: 14pt;">5.构建应用并部署到测试/生产环境</span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 18.6667px;">后续学习：</span></div><div><span style="font-size: 18.6667px;">高级特性：动画、指令、安全等</span></div><div><span style="font-size: 18.6667px;">周边生态：angular CLI，angular material，angular  </span><span style="font-size: 18.6667px;">universal，第三方的组件，UI库，框架等ionic，native script</span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 18.6667px;"><br/></span></div><div><span style="font-size: 14pt;">    </span></div><div><span style="font-size: 14pt;">    </span></div><div><span style="font-size: 14pt;">            </span></div><div><br/></div><div><span style="font-size: 14pt;"> </span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;"> </span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;"><br/></span></div></span>
</div></body></html> 